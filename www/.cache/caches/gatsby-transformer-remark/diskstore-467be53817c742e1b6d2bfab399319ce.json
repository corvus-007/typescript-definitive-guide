{"expireTime":9007200833493979000,"key":"transformer-remark-markdown-ast-4d17658b7858e579f5c0f7514119fc05-gatsby-remark-collect-info-for-block-code-before-prismjsgatsby-remark-prismjsgatsby-remark-decorate-block-codegatsby-remark-add-heading-link-","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"html","value":"\n    <button class=\"content__button_copy-to-buffer\" path=\"dobavlenie-helpera-imetiruushchego-mehanizm-spread-array-pri-kompilyacii-v-ecmascript-nije-versii-6-pri-neaktivnom-flage-downleveliteration\">\n      <svg class=\"svg-icon copy-to-buffer-button__svg-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <use xlink:href=\"#iconmonstr-link\"></use>\n      </svg>\n      <div class=\"content__tooltip_copy-to-buffer tooltip\">\n        Скопировать ссылку в буффер обмена\n      </div>\n    </button>\n  "},{"type":"span","children":[{"type":"text","value":"Добавление хелпера иметирующего механизм spread array при компиляции в ecmascript ниже версии 6 при неактивном флаге --downlevelIteration"}],"data":{"hName":"span"}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":140,"offset":139},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Начиная с версии ","position":{"start":{"line":3,"column":1,"offset":141},"end":{"line":3,"column":18,"offset":158},"indent":[]}},{"type":"inlineCode","value":"v3.6","position":{"start":{"line":3,"column":18,"offset":158},"end":{"line":3,"column":24,"offset":164},"indent":[]}},{"type":"text","value":", хелпер, генерирующийся при компиляции такой конструкции, как ","position":{"start":{"line":3,"column":24,"offset":164},"end":{"line":3,"column":87,"offset":227},"indent":[]}},{"type":"inlineCode","value":"array spread ([...Array(5)])","position":{"start":{"line":3,"column":87,"offset":227},"end":{"line":3,"column":117,"offset":257},"indent":[]}},{"type":"text","value":", в ECMAScript ниже 6 версии, при неактивном флаге ","position":{"start":{"line":3,"column":117,"offset":257},"end":{"line":3,"column":168,"offset":308},"indent":[]}},{"type":"inlineCode","value":"--downlevelIteration","position":{"start":{"line":3,"column":168,"offset":308},"end":{"line":3,"column":190,"offset":330},"indent":[]}},{"type":"text","value":", притерпел кардинальные изменения. Но обо всем по порядку.","position":{"start":{"line":3,"column":190,"offset":330},"end":{"line":3,"column":249,"offset":389},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":141},"end":{"line":3,"column":249,"offset":389},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"До ","position":{"start":{"line":6,"column":1,"offset":392},"end":{"line":6,"column":4,"offset":395},"indent":[]}},{"type":"inlineCode","value":"TypeScript","position":{"start":{"line":6,"column":4,"offset":395},"end":{"line":6,"column":16,"offset":407},"indent":[]}},{"type":"text","value":" версии ","position":{"start":{"line":6,"column":16,"offset":407},"end":{"line":6,"column":24,"offset":415},"indent":[]}},{"type":"inlineCode","value":"v3.6","position":{"start":{"line":6,"column":24,"offset":415},"end":{"line":6,"column":30,"offset":421},"indent":[]}},{"type":"text","value":", при компиляции кода в версию ниже ","position":{"start":{"line":6,"column":30,"offset":421},"end":{"line":6,"column":66,"offset":457},"indent":[]}},{"type":"inlineCode","value":"es6","position":{"start":{"line":6,"column":66,"offset":457},"end":{"line":6,"column":71,"offset":462},"indent":[]}},{"type":"text","value":", для эмитации механизма ","position":{"start":{"line":6,"column":71,"offset":462},"end":{"line":6,"column":96,"offset":487},"indent":[]}},{"type":"inlineCode","value":"spread","position":{"start":{"line":6,"column":96,"offset":487},"end":{"line":6,"column":104,"offset":495},"indent":[]}},{"type":"text","value":" примененого к массиву генерировался код объединяющий массивы с помощью его метода ","position":{"start":{"line":6,"column":104,"offset":495},"end":{"line":6,"column":187,"offset":578},"indent":[]}},{"type":"inlineCode","value":".concat()","position":{"start":{"line":6,"column":187,"offset":578},"end":{"line":6,"column":198,"offset":589},"indent":[]}},{"type":"text","value":" - ","position":{"start":{"line":6,"column":198,"offset":589},"end":{"line":6,"column":201,"offset":592},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":392},"end":{"line":6,"column":201,"offset":592},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_typescript\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">typescript</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// этот код es6+ компилировался в..</span>\n<span class=\"token keyword\">var</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ..этот es5 код</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_typescript\"></div>\n</div>","position":{"start":{"line":8,"column":1,"offset":594},"end":{"line":11,"column":6,"offset":735},"indent":[1,1,1]},"metadata":{"filepath":""}},{"type":"paragraph","children":[{"type":"text","value":"Но эмитация подобным образом не соответствует поведению предполагаемого спецификацией ","position":{"start":{"line":13,"column":1,"offset":737},"end":{"line":13,"column":87,"offset":823},"indent":[]}},{"type":"inlineCode","value":"es6","position":{"start":{"line":13,"column":87,"offset":823},"end":{"line":13,"column":92,"offset":828},"indent":[]}},{"type":"text","value":" при использовании массива созданного с помощью конструктора, которому при вызове передали в качестве единственного аргумента числовое значение.","position":{"start":{"line":13,"column":92,"offset":828},"end":{"line":13,"column":236,"offset":972},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":737},"end":{"line":13,"column":236,"offset":972},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_typescript\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">typescript</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// этот код es6+ компилировался в..</span>\n<span class=\"token keyword\">var</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ..этот es5 код</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_typescript\"></div>\n</div>","position":{"start":{"line":15,"column":1,"offset":974},"end":{"line":18,"column":6,"offset":1133},"indent":[1,1,1]},"metadata":{"filepath":""}},{"type":"paragraph","children":[{"type":"text","value":"Получение экземпляра массива подобным образом приводит к созданию объекта массива с заданной длиной, равной значению переданного вкачестве аргумента, а также полным отсутствием элементов и следовательно ассоциированных с ними ключей (индексов массива).","position":{"start":{"line":20,"column":1,"offset":1135},"end":{"line":20,"column":253,"offset":1387},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1135},"end":{"line":20,"column":253,"offset":1387},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_typescript\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">typescript</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [empty × 3]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ['a', 'b', 'c']</span>\n\n\n<span class=\"token comment\">/**\n * У объекта массива созданного с помощью конструктора\n * длина равна переданному аргументу, то есть 3, но\n * ключи представляющие индекс массива, также как и\n * элементы - отсутствуют.\n */</span>\n<span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// псевдо объект массива {length: 3}</span>\n\n<span class=\"token comment\">/**\n * У объекта массива созданного с помощью литерала массива\n * длина равняется количеству его элементов, то есть 3, а также\n * существуют ключи (0, 1, 2) ассоциированные с элементами ('a','b','c').\n */</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// псевдо объект массива {length: 3, 0: 'a', 1: 'b', 2: 'c'}</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_typescript\"></div>\n</div>","position":{"start":{"line":22,"column":1,"offset":1389},"end":{"line":42,"column":6,"offset":1998},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"metadata":{"filepath":""}},{"type":"paragraph","children":[{"type":"text","value":"Не будет лишним напомнить, что элементы у массива созданного с помощью конструктора буквально полностью отсутствуют, а не имеют значение ","position":{"start":{"line":44,"column":1,"offset":2000},"end":{"line":44,"column":138,"offset":2137},"indent":[]}},{"type":"inlineCode","value":"undefined","position":{"start":{"line":44,"column":138,"offset":2137},"end":{"line":44,"column":149,"offset":2148},"indent":[]}},{"type":"text","value":", как может показаться. При обращении к элементам по индексу входящего в диапазон установленного его длиной, ","position":{"start":{"line":44,"column":149,"offset":2148},"end":{"line":44,"column":258,"offset":2257},"indent":[]}},{"type":"inlineCode","value":"undefined","position":{"start":{"line":44,"column":258,"offset":2257},"end":{"line":44,"column":269,"offset":2268},"indent":[]}},{"type":"text","value":" возвращается не потому что хранится в качестве элемента, а потому что ","position":{"start":{"line":44,"column":269,"offset":2268},"end":{"line":44,"column":340,"offset":2339},"indent":[]}},{"type":"inlineCode","value":"undefined","position":{"start":{"line":44,"column":340,"offset":2339},"end":{"line":44,"column":351,"offset":2350},"indent":[]}},{"type":"text","value":" возвращается всегда при обращении к несуществующему ключу объекта.","position":{"start":{"line":44,"column":351,"offset":2350},"end":{"line":44,"column":418,"offset":2417},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2000},"end":{"line":44,"column":418,"offset":2417},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_typescript\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">typescript</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// случай с объектом созданного при помощи литерала</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>prop<span class=\"token punctuation\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'prop'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// value - обращение к существующему ключу prop  </span>\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'prop'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined - обращение к не существующему ключу prop</span>\n\n<span class=\"token comment\">// случай с массивом созданного при помощи литерала</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// a - обращение к существующему ключу 0</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined - обращение к не существующему ключу 10</span>\n\n<span class=\"token comment\">// случай с массивом созданного при помощи конструктора</span>\n\n<span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined - обращение к не существующему ключу 0</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_typescript\"></div>\n</div>","position":{"start":{"line":46,"column":1,"offset":2419},"end":{"line":60,"column":6,"offset":2951},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"metadata":{"filepath":""}},{"type":"paragraph","children":[{"type":"text","value":"Отсутствие ключей является причиной несоответствия количества реальных итераций и длины массива при работе с ними. Методы массива (","position":{"start":{"line":62,"column":1,"offset":2953},"end":{"line":62,"column":132,"offset":3084},"indent":[]}},{"type":"inlineCode","value":".forEach()","position":{"start":{"line":62,"column":132,"offset":3084},"end":{"line":62,"column":144,"offset":3096},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":62,"column":144,"offset":3096},"end":{"line":62,"column":146,"offset":3098},"indent":[]}},{"type":"inlineCode","value":".map()","position":{"start":{"line":62,"column":146,"offset":3098},"end":{"line":62,"column":154,"offset":3106},"indent":[]}},{"type":"text","value":" и др.) и итерирующие конструкции (","position":{"start":{"line":62,"column":154,"offset":3106},"end":{"line":62,"column":189,"offset":3141},"indent":[]}},{"type":"inlineCode","value":"forin\\forof","position":{"start":{"line":62,"column":189,"offset":3141},"end":{"line":62,"column":202,"offset":3154},"indent":[]}},{"type":"text","value":")проверяют ключи с помощью метода ","position":{"start":{"line":62,"column":202,"offset":3154},"end":{"line":62,"column":236,"offset":3188},"indent":[]}},{"type":"inlineCode","value":".hasOwnProperty(key)","position":{"start":{"line":62,"column":236,"offset":3188},"end":{"line":62,"column":258,"offset":3210},"indent":[]}},{"type":"text","value":" доставшегося по наследству от базового типа ","position":{"start":{"line":62,"column":258,"offset":3210},"end":{"line":62,"column":303,"offset":3255},"indent":[]}},{"type":"inlineCode","value":"Object","position":{"start":{"line":62,"column":303,"offset":3255},"end":{"line":62,"column":311,"offset":3263},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":62,"column":311,"offset":3263},"end":{"line":62,"column":312,"offset":3264},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2953},"end":{"line":62,"column":312,"offset":3264},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_typescript\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">typescript</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">/**\n * псевдо объект массива {length: 3}\n * Нет ключей - нет итераций!\n * Вывод в консоль: (пусто)\n */</span>\n<span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">iteration</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">/**\n * псевдо объект массива {length: 3}\n * Нет ключей - нет итераций!\n * Вывод в консоль: (пусто)\n */</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> item <span class=\"token keyword\">of</span> <span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">iteration</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_typescript\"></div>\n</div>","position":{"start":{"line":64,"column":1,"offset":3266},"end":{"line":79,"column":6,"offset":3596},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"metadata":{"filepath":""}},{"type":"paragraph","children":[{"type":"text","value":"Тем не менее при применении механиза ","position":{"start":{"line":81,"column":1,"offset":3598},"end":{"line":81,"column":38,"offset":3635},"indent":[]}},{"type":"inlineCode","value":"spread","position":{"start":{"line":81,"column":38,"offset":3635},"end":{"line":81,"column":46,"offset":3643},"indent":[]}},{"type":"text","value":" к массиву в ","position":{"start":{"line":81,"column":46,"offset":3643},"end":{"line":81,"column":59,"offset":3656},"indent":[]}},{"type":"inlineCode","value":"es6+","position":{"start":{"line":81,"column":59,"offset":3656},"end":{"line":81,"column":65,"offset":3662},"indent":[]}},{"type":"text","value":" создает несуществующие элементы и заполняет их значениями ","position":{"start":{"line":81,"column":65,"offset":3662},"end":{"line":81,"column":124,"offset":3721},"indent":[]}},{"type":"inlineCode","value":"undefined","position":{"start":{"line":81,"column":124,"offset":3721},"end":{"line":81,"column":135,"offset":3732},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":81,"column":135,"offset":3732},"end":{"line":81,"column":136,"offset":3733},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":3598},"end":{"line":81,"column":136,"offset":3733},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_typescript\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">typescript</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">/**\n * Длина === 7, количество итераций === 7\n */</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// es6 - [1, 2, undefined, undefined, undefined, 3, 4]</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_typescript\"></div>\n</div>","position":{"start":{"line":83,"column":1,"offset":3735},"end":{"line":88,"column":6,"offset":3888},"indent":[1,1,1,1,1]},"metadata":{"filepath":""}},{"type":"paragraph","children":[{"type":"text","value":"Но скомпилированный ","position":{"start":{"line":90,"column":1,"offset":3890},"end":{"line":90,"column":21,"offset":3910},"indent":[]}},{"type":"inlineCode","value":"TypeScript","position":{"start":{"line":90,"column":21,"offset":3910},"end":{"line":90,"column":33,"offset":3922},"indent":[]}},{"type":"text","value":" в ","position":{"start":{"line":90,"column":33,"offset":3922},"end":{"line":90,"column":36,"offset":3925},"indent":[]}},{"type":"inlineCode","value":"es < v6","position":{"start":{"line":90,"column":36,"offset":3925},"end":{"line":90,"column":45,"offset":3934},"indent":[]}},{"type":"text","value":" код при неактивном флаге ","position":{"start":{"line":90,"column":45,"offset":3934},"end":{"line":90,"column":71,"offset":3960},"indent":[]}},{"type":"inlineCode","value":"--downlevelIteration","position":{"start":{"line":90,"column":71,"offset":3960},"end":{"line":90,"column":93,"offset":3982},"indent":[]}},{"type":"text","value":", до версии ","position":{"start":{"line":90,"column":93,"offset":3982},"end":{"line":90,"column":105,"offset":3994},"indent":[]}},{"type":"inlineCode","value":"v3.6","position":{"start":{"line":90,"column":105,"offset":3994},"end":{"line":90,"column":111,"offset":4000},"indent":[]}},{"type":"text","value":" не соответствовал этому поведению, поскольку не преобразовывал отсутствующие элементы в элементы ассоциированные со значением ","position":{"start":{"line":90,"column":111,"offset":4000},"end":{"line":90,"column":238,"offset":4127},"indent":[]}},{"type":"inlineCode","value":"undefined","position":{"start":{"line":90,"column":238,"offset":4127},"end":{"line":90,"column":249,"offset":4138},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":90,"column":249,"offset":4138},"end":{"line":90,"column":250,"offset":4139},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":3890},"end":{"line":90,"column":250,"offset":4139},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"content__code\">\n    <div class=\"content__code-panel_top content__code-panel_lang_typescript\">\n        <span class=\"content_code-label_filepath\"></span>\n        <span class=\"content_code-label_lang\">typescript</span>\n    </div>\n    <div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">/**\n * Длина === 7, количество итераций === 4!\n */</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// es6 синтаксис компилировался в..</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// в es5 подобный код - [1, 2, empty × 3, 2, 3]</span></code></pre></div>\n    <div class=\"content__code-panel_bottom content__code-panel_lang_typescript\"></div>\n</div>","position":{"start":{"line":92,"column":1,"offset":4141},"end":{"line":98,"column":6,"offset":4357},"indent":[1,1,1,1,1,1]},"metadata":{"filepath":""}},{"type":"paragraph","children":[{"type":"text","value":"После того, как коммунити обратило внимание на несоответствие в поведении, подход с нативным методом ","position":{"start":{"line":100,"column":1,"offset":4359},"end":{"line":100,"column":102,"offset":4460},"indent":[]}},{"type":"inlineCode","value":".concat()","position":{"start":{"line":100,"column":102,"offset":4460},"end":{"line":100,"column":113,"offset":4471},"indent":[]}},{"type":"text","value":" заменили на генерацию хелпера ","position":{"start":{"line":100,"column":113,"offset":4471},"end":{"line":100,"column":144,"offset":4502},"indent":[]}},{"type":"inlineCode","value":"__spreadArrays(array)","position":{"start":{"line":100,"column":144,"offset":4502},"end":{"line":100,"column":167,"offset":4525},"indent":[]}},{"type":"text","value":" и тем самым исправили поведение на предполагаемое спецификацией. Отказ от нативного ","position":{"start":{"line":100,"column":167,"offset":4525},"end":{"line":100,"column":252,"offset":4610},"indent":[]}},{"type":"inlineCode","value":".concat()","position":{"start":{"line":100,"column":252,"offset":4610},"end":{"line":100,"column":263,"offset":4621},"indent":[]}},{"type":"text","value":" замедлил сказался на производительности, снизив её ровно в два раза.","position":{"start":{"line":100,"column":263,"offset":4621},"end":{"line":100,"column":332,"offset":4690},"indent":[]}}],"position":{"start":{"line":100,"column":1,"offset":4359},"end":{"line":100,"column":332,"offset":4690},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":101,"column":1,"offset":4691}}}}